<!DOCTYPE html>
<html>
<head>
    <title>Submisision Form</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../bootstrap-5.3.8-dist/css/bootstrap.min.css">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;       
            height: 100vh;             
            margin: 0;
            background-color: #f2f2f2;
        }
        .frame {
            border: 2px solid green;     
            width: 450px;              
            border-radius: 10px;       
            background-color: white;  
            overflow: hidden; 
            box-shadow: 2px 2px 10px black;
        }
        .frame-header {
            background-color: green;   
            color: white;             
            padding: 10px;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
        }
        .frame-content {
            padding: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
            text-align: left;
        }
        input[type="text"], input[type="email"], textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid grey;
            border-radius: 6px;
            box-sizing: border-box;
        }
        textarea {
            resize: vertical;
        }
        .tombol {
            margin-top: 15px;
            width: 100%;
            padding: 10px;
            background-color: green;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
        }
        .tombol:hover {
            background-color: darkgreen;
        }
        .message_box {
            margin-top: 15px;
            font-size: 14px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="frame">
        <div class="frame-header">Submission Form</div>
        <div class="frame-content">
            <form id="contactForm" method="post" action="">
                <div>
                    <label for="name">Nama:</label>
                    <input type="text" id="name" name="name" placeholder="Masukkan nama Anda">
                </div>
                <div>
                    <label for="email">Alamat Email:</label>
                    <input type="email" id="email" name="email" placeholder="Masukkan email Anda">
                </div>
                <div>
                    <label for="message">Pesan:</label>
                    <textarea id="message" name="message" placeholder="Tulis pesan Anda..." rows="4"></textarea>
                </div>
                <div>
                    <button type="submit" class="tombol">Kirim</button>
                </div>
            </form>
            <div class="message_box"></div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        function isValidEmailAddress(emailAddress) {
            var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~]+)*)@([a-z\d-]+\.)+[a-z]{2,}$/i;
            return pattern.test(emailAddress);
        }

        $(document).ready(function(){
            var delay = 1500;

            $('#contactForm').on('submit', function(e){
                e.preventDefault();

                // ambil nilai input
                var name = $('#name').val().trim();
                var email = $('#email').val().trim();
                var message = $('#message').val().trim();

                // validasi
                if(name === '') {
                    $('.message_box').html('<span style="color:red;font-weight:bold;">Masukkan Nama Anda!</span>');
                    $('#name').focus();
                    return false;
                }
                if(email === '') {
                    $('.message_box').html('<span style="color:red;font-weight:bold;">Masukkan Email Anda!</span>');
                    $('#email').focus();
                    return false;
                }
                if(!isValidEmailAddress(email)) {
                    $('.message_box').html('<span style="color:red;font-weight:bold;">Email tidak valid!</span>');
                    $('#email').focus();
                    return false;
                }
                if(message === '') {
                    $('.message_box').html('<span style="color:red;font-weight:bold;">Masukkan Pesan Anda!</span>');
                    $('#message').focus();
                    return false;
                }

                $.ajax({
                    type: "POST",
                    url: "ajax.php",
                    data: { name: name, email: email, message: message },
                    beforeSend: function() {
                        $('.message_box').html('<img src="Loader.gif" width="25" height="25"/> Mengirim...');
                    },
                    success: function(data) {
                        setTimeout(function(){
                            $('.message_box').html(data);
                            $('#contactForm')[0].reset();
                        }, delay);
                    },
                    error: function() {
                        $('.message_box').html('<span style="color:red;">Terjadi kesalahan saat mengirim data!</span>');
                    }
                });
            });
        });
    </script>
</body>
</html>
